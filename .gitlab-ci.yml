stages:
  - build-unit-test
  - deploy

compile:
  stage: build-unit-test
  image: $CI_REGISTRY/coe-maven-centos:latest
  script:
    - mvn verify -B
  tags:
    - docker

deploy:
  stage: deploy
  image: $CI_REGISTRY/coe-maven-centos:latest
  script:
    - mvn deploy -Pcoe-release -B
  tags:
    - docker
  only:
    - master
